{"version":3,"file":"static/js/592.2dfccba2.chunk.js","mappings":"gMA+HA,QA1HA,WACE,MAAOA,EAASC,IAAcC,EAAAA,EAAAA,UAAS,CACrCC,KAAM,MAEDC,EAAWC,IAAgBH,EAAAA,EAAAA,UAAS,UACpCI,EAAMC,IAAWL,EAAAA,EAAAA,UAAS,KAC1BM,EAAcC,IAAmBP,EAAAA,EAAAA,UAAS,IAmEjD,OAjEAQ,EAAAA,EAAAA,YAAU,KAcU,UAAdN,IAbmBO,WACrB,IACE,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,GAADC,OAC3BC,iDAAiC,oCAElCJ,IACFL,EAAQK,EAASN,KAAKA,MACtBG,EAAgBG,EAASN,KAAKA,MAElC,CAAE,MAAOW,GACPC,QAAQC,IAAIF,EACd,GAGAG,GACAf,EAAa,gBACf,GACC,CAACD,KAOJM,EAAAA,EAAAA,YAAU,KACR,MAAMW,EAAe,OAAJf,QAAI,IAAJA,OAAI,EAAJA,EAAMgB,QAAQC,GACtBC,OAAOC,KAAKzB,GAAS0B,OAAOC,GAC1BC,OAAOL,EAAII,IACfE,cACAC,SAAS9B,EAAQ2B,GAAKE,mBAG7BpB,EAAgBY,EAAS,GACxB,CAACrB,EAASM,KAgCXyB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uBAAsBC,UAEnCC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,iCAAgCC,SAAA,EAC/CC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,UAASC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,kCAAiCC,UAC7CF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,MAAKC,SAAC,eAEtBF,EAAAA,EAAAA,KAAA,MAAAE,UACEF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,0BAAyBC,UACrCF,EAAAA,EAAAA,KAAA,SACEC,UAAU,0BACVG,KAAK,OACLC,KAAK,OACLC,MAAOrC,EAAQG,KACfmC,SA5DcC,IAC1B,MAAM,KAAEH,EAAI,MAAEC,GAAUE,EAAEC,OAC1BvC,EAAW,IAAKD,EAAS,CAACoC,GAAOC,GAAQ,EA2D7BI,YAAY,gCAKpBV,EAAAA,EAAAA,KAAA,SAAOC,UAAU,UAASC,SACX,OAAZzB,QAAY,IAAZA,OAAY,EAAZA,EAAckC,KAAI,CAACnB,EAAKoB,KACvBZ,EAAAA,EAAAA,KAAA,MAAAE,UACEC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,+CAA8CC,SAAA,EAC1DF,EAAAA,EAAAA,KAAA,OAAAE,SAAMV,EAAIpB,QACV4B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,4CAA2CC,UAC1DF,EAAAA,EAAAA,KAAA,UACEC,UAAU,iLACVY,QAASA,KA1DDjC,WACtB,GAAKkC,EAIL,IACE,MAAMjC,QAAiBC,EAAAA,EAAMC,IAAI,GAADC,OAC3BC,iDAAiC,gCAAAD,OAA+B8B,GACnE,CACEC,aAAc,SAGlB,GAAIlC,EAAU,CACZ,MAAMmC,EAAMC,OAAOC,IAAIC,gBAAgB,IAAIC,KAAK,CAACvC,EAASN,QACpD8C,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAOR,EACZK,EAAKI,aAAa,WAAYX,GAC9BQ,SAASI,KAAKC,YAAYN,GAC1BA,EAAKO,OACP,MACEC,EAAAA,GAAM3C,MAAML,EAASN,KAAKuD,QAE9B,CAAE,MAAO5C,GACP2C,EAAAA,GAAM3C,MAAM,wBACZC,QAAQC,IAAI,wBAADJ,OAAyBE,EAAM4C,SAC5C,MAvBED,EAAAA,GAAM3C,MAAM,gBAuBd,EAmCgB6C,CADWvC,EAAIpB,KACI,EACnB8B,SACH,mBAVIU,WAwBrB,C","sources":["app/file-manager/ovoc-files/page.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nfunction OvocFiles() {\r\n  const [filters, setFilters] = useState({\r\n    file: \"\",\r\n  });\r\n  const [fetchData, setFetchData] = useState(\"fetch\");\r\n  const [data, setData] = useState([]);\r\n  const [filteredData, setFilteredData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchFilesList = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `${process.env.REACT_APP_BACKEND_URL}/attachments/getOVOCVendorFiles`\r\n        );\r\n        if (response) {\r\n          setData(response.data.data);\r\n          setFilteredData(response.data.data);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    if (fetchData === \"fetch\") {\r\n      fetchFilesList();\r\n      setFetchData(\"do not fetch\");\r\n    }\r\n  }, [fetchData]);\r\n\r\n  const handleFilterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFilters({ ...filters, [name]: value });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const filtered = data?.filter((row) => {\r\n      return Object.keys(filters).every((key) => {\r\n        return String(row[key])\r\n          .toLowerCase()\r\n          .includes(filters[key].toLowerCase());\r\n      });\r\n    });\r\n    setFilteredData(filtered);\r\n  }, [filters, data]);\r\n\r\n  const handleFetchFile = async (id) => {\r\n    if (!id) {\r\n      toast.error(\"No file found\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_BACKEND_URL}/attachments/getAttachments/${id}`,\r\n        {\r\n          responseType: \"blob\",\r\n        }\r\n      );\r\n      if (response) {\r\n        const url = window.URL.createObjectURL(new Blob([response.data]));\r\n        const link = document.createElement(\"a\");\r\n        link.href = url;\r\n        link.setAttribute(\"download\", id);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n      } else {\r\n        toast.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"Error fetching file.\");\r\n      console.log(`Error fetching file: ${error.message}`);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto px-4\">\r\n      {/* Container to enable horizontal scroll */}\r\n      <table className=\"min-w-full bg-white rounded-lg\">\r\n        <thead className=\"text-xs\">\r\n          <tr className=\"bg-blue-200 border border-black\">\r\n            <th className=\"p-2\">File ID</th>\r\n          </tr>\r\n          <tr>\r\n            <th className=\"border border-black p-2\">\r\n              <input\r\n                className=\"p-2 border border-black\"\r\n                type=\"text\"\r\n                name=\"file\"\r\n                value={filters.file}\r\n                onChange={handleFilterChange}\r\n                placeholder=\"Filter by file name\"\r\n              />\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"text-xs\">\r\n          {filteredData?.map((row, index) => (\r\n            <tr key={index}>\r\n              <td className=\"flex justify-between border border-black p-2\">\r\n                <div>{row.file}</div>\r\n                <div className=\"bg-transparent flex justify-end space-x-8\">\r\n                <button\r\n                  className=\"bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-0.5 px-1.5 rounded shadow-lg transform hover:-translate-y-1 hover:shadow-xl active:translate-y-0.5\"\r\n                  onClick={() => {\r\n                    const id = row.file;\r\n                    handleFetchFile(id);\r\n                  }}\r\n                >\r\n                  Download\r\n                </button>\r\n                {/* <button className=\"bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-0.5 px-1.5 rounded shadow-lg transform hover:-translate-y-1 hover:shadow-xl active:translate-y-0.5\">\r\n                  Cancel\r\n                </button> */}\r\n              </div>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OvocFiles;\r\n"],"names":["filters","setFilters","useState","file","fetchData","setFetchData","data","setData","filteredData","setFilteredData","useEffect","async","response","axios","get","concat","process","error","console","log","fetchFilesList","filtered","filter","row","Object","keys","every","key","String","toLowerCase","includes","_jsx","className","children","_jsxs","type","name","value","onChange","e","target","placeholder","map","index","onClick","id","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","toast","message","handleFetchFile"],"sourceRoot":""}